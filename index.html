<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>El Rey de las Empanadas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
 font-family:Arial,sans-serif;
 background:#f4f4f4;
 margin:0;
 padding:10px;
}
h1{
 text-align:center;
 color:#b30000;
 margin-bottom:5px;
}
h1 small{
 display:block;
 font-size:12px;
 color:#555;
}
.section-title{
 background:#b30000;
 color:white;
 padding:8px 12px;
 border-radius:8px;
 margin-bottom:10px;
 font-size:18px;
}
.sub-title{
 font-weight:bold;
 color:#b30000;
 margin:12px 0 6px;
 font-size:15px;
 border-bottom:1px solid #eee;
}
.card{
 background:white;
 padding:15px;
 border-radius:12px;
 margin-bottom:20px;
 box-shadow:0 2px 6px rgba(0,0,0,.1);
}
.item{
 display:flex;
 justify-content:space-between;
 align-items:center;
 padding:8px 0;
 border-bottom:1px dashed #eee;
}
.item:last-child{border-bottom:none}
.name{
 font-weight:bold;
 font-size:15px;
}
.desc{
 font-size:12px;
 color:#777;
 margin-top:2px;
}
.controls button{
 width:30px;
 height:30px;
 border:none;
 border-radius:6px;
 font-size:18px;
 cursor:pointer;
}
.controls .plus{background:#25D366;color:white;}
.controls .minus{background:#b30000;color:white;}
.selector{
 display:flex;
 gap:10px;
 margin:10px 0;
}
.selector button{
 flex:1;
 padding:10px;
 font-size:16px;
 border-radius:8px;
 border:1px solid #ccc;
 background:#eee;
 cursor:pointer;
}
.selector button.active{
 background:#b30000;
 color:white;
}
.input-area input, .input-area textarea{
 width:100%;
 padding:8px;
 margin:6px 0;
 font-size:16px;
 border-radius:6px;
 border:1px solid #ccc;
}
.total{
 background:white;
 padding:15px;
 border-radius:12px;
 box-shadow:0 3px 8px rgba(0,0,0,.15);
}
button.send{
 width:100%;
 padding:15px;
 background:#25D366;
 color:white;
 font-size:20px;
 border:none;
 border-radius:12px;
 margin-top:10px;
}
.notice{
 background:#fff3cd;
 color:#856404;
 padding:8px 12px;
 border-radius:6px;
 margin:8px 0;
 font-size:14px;
}
.notice input{
 width:100%;
 border:none;
 background:transparent;
 font-size:16px;
}
small{color:#777}

/* Bebidas */
.brand-card{
 background:#f9f9f9;
 border:1px solid #ddd;
 border-radius:8px;
 padding:8px;
 margin:6px 0;
}
.brand-title{
 font-weight:bold;
 font-size:14px;
 color:#b30000;
 margin-bottom:4px;
}

/* QR */
.qr-section{
 background:white;
 margin:30px auto 10px;
 padding:20px;
 border-radius:16px;
 border:2px solid #b30000;
 text-align:center;
 max-width:360px;
 box-shadow:0 4px 10px rgba(0,0,0,.15);
}
.qr-section h3{
 color:#b30000;
 margin-bottom:10px;
}
.qr-section img{
 width:220px;
 margin:10px auto;
 display:block;
}
.qr-section a{
 display:block;
 margin-top:15px;
 padding:12px;
 background:#25D366;
 color:white;
 text-decoration:none;
 font-weight:bold;
 border-radius:10px;
}
</style>
</head>

<body>

<h1>ðŸ‘‘ El Rey de las Empanadas
<small>Horario: 17:00 a 23:00 | Lunes cerrado | Delivery: 18:30 a 23:00</small>
</h1>

<div id="menu"></div>

<div class="total">
<div class="section-title">ðŸ›’ Resumen del pedido</div>
<div id="resumen"><small>No hay productos seleccionados</small></div>

<p><b>Total:</b> $<span id="total">0</span></p>
<small>EnvÃ­o no incluido</small>

<div class="section-title">ðŸšš Forma de entrega</div>
<div class="selector">
<button class="active" onclick="setEntrega('Mostrador')">Retiro en mostrador</button>
<button onclick="setEntrega('Delivery')">Delivery</button>
</div>

<div class="input-area">
<input id="nombre" placeholder="Nombre">
<input id="direccion" placeholder="DirecciÃ³n" style="display:none">
<textarea id="observaciones" placeholder="Observaciones" style="display:none"></textarea>
</div>

<div class="section-title">ðŸ’³ Forma de pago</div>
<div class="selector">
<button class="active" onclick="setPago('Efectivo')">Efectivo</button>
<button onclick="setPago('Transferencia')">Transferencia</button>
</div>

<div id="cambioNotice" class="notice">
<input id="efectivoCambio" placeholder="Â¿Necesita cambio?">
</div>

<div id="transferNotice" class="notice" style="display:none">
El enlace de transferencia aparecerÃ¡ en WhatsApp.
</div>

<button class="send" onclick="enviar()">ðŸ“² Enviar pedido</button>
</div>

<div class="qr-section">
<h3>ðŸ“± EscaneÃ¡ para hacer tu pedido</h3>
<img src="https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=https://reydelasempanadas.github.io/el-rey-de-las-empanadas/">
<a href="https://wa.me/?text=Click%20en%20el%20enlace%20para%20hacer%20tu%20pedido:%20https://reydelasempanadas.github.io/el-rey-de-las-empanadas/" target="_blank">
ðŸ“¤ Compartir por WhatsApp
</a>
</div>

<script>
let entrega="Mostrador", pago="Efectivo";
let carrito={}, precios={}, total=0;

function idify(t){return t.replace(/\s+/g,'_').replace(/[^\w]/g,'');}

const productos=[
{cat:"ðŸ¥Ÿ Empanadas - $60 c/u",precio:60,items:[
["CARNE",""],
["Empanada Criolla","carne y huevo"],
["Empanada Mendocina","carne, huevo y aceituna"],
["Empanada Mexicana","carne, huevo, aceituna y pimienta"],
["Empanada Cordobesa","carne, huevo y pasas de uva"],
["Empanada Mixta","carne, huevo, choclo y calabresa"],
["Empanada Gallega","carne, huevo y panceta"],
["Empanada Burguer","carne, cebolla y cheddar"],

["POLLO",""],
["Empanada Pollo clÃ¡sico","pollo, salsa y huevo"],
["Empanada Pollo queso","pollo, queso y aceituna"],
["Empanada Pollo requesÃ³n","pollo y requesÃ³n"],
["Empanada Pollo mostaza","pollo a la mostaza"],

["VERDURA",""],
["Empanada Palmito","jamÃ³n y salsa golf"],
["Empanada Acelga","cebolla, morrÃ³n y huevo"],
["Empanada Humita","choclo, queso y salsa blanca"],
["Empanada Choclo y jamÃ³n",""],
["Empanada Caprese","queso, tomate y albahaca"]
]}];

function render(){
 let h="";
 productos.forEach(s=>{
  h+=`<div class="card"><div class="section-title">${s.cat}</div>`;
  s.items.forEach(i=>{
   if(i[1]==="" && i[0]===i[0].toUpperCase()){
    h+=`<div class="sub-title">${i[0]}</div>`;return;
   }
   let id=idify(i[0]);carrito[id]=0;precios[id]=s.precio;
   h+=`<div class="item">
   <div><div class="name">${i[0]}</div><div class="desc">${i[1]}</div></div>
   <div class="controls">
   <button class="minus" onclick="chg('${id}',-1)">âˆ’</button>
   <span id="${id}">0</span>
   <button class="plus" onclick="chg('${id}',1)">+</button>
   </div></div>`;
  });
  h+="</div>";
 });
 document.getElementById("menu").innerHTML=h;
}

function chg(id,d){
 carrito[id]=Math.max(0,carrito[id]+d);
 document.getElementById(id).innerText=carrito[id];
 total=0;
 for(let k in carrito) total+=carrito[k]*precios[k];
 document.getElementById("total").innerText=total;
 resumen();
}

function resumen(){
 let r="";
 for(let k in carrito) if(carrito[k]>0) r+=`${carrito[k]} ${k.replace(/_/g,' ')}<br>`;
 document.getElementById("resumen").innerHTML=r||"<small>No hay productos seleccionados</small>";
}

function setEntrega(t){
 entrega=t;
 direccion.style.display=t=="Delivery"?"block":"none";
 observaciones.style.display=t=="Delivery"?"block":"none";
}

function setPago(p){
 pago=p;
 cambioNotice.style.display=p=="Efectivo"?"block":"none";
 transferNotice.style.display=p=="Transferencia"?"block":"none";
}

function enviar(){
 if(total==0||nombre.value==""){alert("Complete el pedido");return;}
 let m="Pedido El Rey de las Empanadas%0A";
 for(let k in carrito) if(carrito[k]>0) m+=`${carrito[k]} ${k.replace(/_/g,' ')}%0A`;
 m+=`Total: $${total}`;
 window.open("https://wa.me/59892663559?text="+m);
}

render();
</script>

</body>
</html>
