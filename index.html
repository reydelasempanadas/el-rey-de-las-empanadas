<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>El Rey de las Empanadas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
 font-family:Arial,sans-serif;
 background:#f4f4f4;
 margin:0;
 padding:10px;
}
h1{
 text-align:center;
 color:#b30000;
 margin-bottom:10px;
}
.section-title{
 background:#b30000;
 color:white;
 padding:8px 12px;
 border-radius:8px;
 margin-bottom:10px;
 font-size:18px;
}
.sub-title{
 font-weight:bold;
 color:#b30000;
 margin:12px 0 6px;
 font-size:15px;
 border-bottom:1px solid #eee;
}
.card{
 background:white;
 padding:15px;
 border-radius:12px;
 margin-bottom:20px;
 box-shadow:0 2px 6px rgba(0,0,0,.1);
}
.item, .bebida-option{
 display:flex;
 justify-content:space-between;
 align-items:center;
 padding:8px 0;
 border-bottom:1px dashed #eee;
 flex-wrap:wrap;
}
.item:last-child, .bebida-option:last-child{border-bottom:none;}
.item > div:first-child, .bebida-option > div:first-child{
 flex:1 1 70%;
 min-width:0;
}
.name{
 font-weight:bold;
 font-size:15px;
}
.desc{
 font-size:12px;
 color:#777;
 margin-top:2px;
}
.controls{
 display:flex;
 align-items:center;
 gap:6px;
 flex-shrink:0;
}
.controls button.plus{
 width:30px;
 height:30px;
 background:#25D366; /* verde */
 color:white;
 border:none;
 border-radius:6px;
 font-size:18px;
 cursor: pointer;
}
.controls button.minus{
 width:30px;
 height:30px;
 background:#b30000; /* rojo */
 color:white;
 border:none;
 border-radius:6px;
 font-size:18px;
 cursor: pointer;
}
.controls span{
 margin:0 6px;
 font-size:16px;
}
.selector{
 display:flex;
 gap:10px;
 margin:10px 0;
}
.selector button{
 flex:1;
 padding:10px;
 font-size:16px;
 border-radius:8px;
 border:1px solid #ccc;
 background:#eee;
 color: #000;
 cursor: pointer;
}
.selector button.active{
 background:#b30000;
 color:white;
}
input,select{
 width:100%;
 padding:8px;
 margin:6px 0;
 font-size:16px;
 border-radius:6px;
 border:1px solid #ccc;
}
.total{
 background:white;
 padding:15px;
 border-radius:12px;
 box-shadow:0 3px 8px rgba(0,0,0,.15);
}
button.send{
 width:100%;
 padding:15px;
 background:#25D366;
 color:white;
 font-size:20px;
 border:none;
 border-radius:12px;
 margin-top:10px;
 cursor:pointer;
}
small{color:#777;}
.bebida-card{
 background:#fff;
 padding:10px;
 border-radius:10px;
 box-shadow:0 1px 4px rgba(0,0,0,.1);
 margin-bottom:12px;
}
.bebida-card .sub-title{
 margin-bottom:6px;
 color:#b30000;
 font-weight:bold;
 font-size:16px;
}
.bebida-option .desc{
 color:#555;
 font-size:13px;
 margin-top:2px;
 width:100%;
}
</style>
</head>

<body>

<h1>üëë El Rey de las Empanadas</h1>

<div id="menu"></div>

<div class="total">
<div class="section-title">üõí Resumen del pedido</div>
<div id="resumen"><small>No hay productos seleccionados</small></div>

<p><b>Total:</b> $<span id="total">0</span></p>
<small>Env√≠o no incluido</small>

<div class="section-title">üöö Forma de entrega</div>
<div class="selector">
<button id="btnMostrador" class="active" onclick="setEntrega('Mostrador')">Retiro en mostrador</button>
<button id="btnDelivery" onclick="setEntrega('Delivery')">Delivery</button>
</div>

<input id="nombre" placeholder="Nombre">
<input id="direccion" placeholder="Direcci√≥n" style="display:none">

<div class="section-title">üí≥ Forma de pago</div>
<div class="selector">
<button id="btnEfectivo" class="active" onclick="setPago('Efectivo')">Efectivo</button>
<button id="btnTransferencia" onclick="setPago('Transferencia')">Transferencia</button>
</div>

<button class="send" onclick="enviar()">üì≤ Enviar pedido</button>
</div>

<script>
let entrega="Mostrador";
let pago="Efectivo";
let carrito={}, total=0;

const productos=[
{
 cat:"ü•ü EMPANADAS",
 precio:60,
 items:[
  ["CARNE",""],
  ["Empanada Criolla","carne y huevo"],
  ["Empanada Mendocina","carne, huevo y aceituna"],
  ["Empanada Mexicana","carne, huevo, aceituna y pimienta"],
  ["Empanada Cordobesa","carne, huevo y pasas de uva"],
  ["Empanada Mixta","carne, huevo, choclo y calabresa"],
  ["Empanada Gallega","carne, huevo y panceta"],
  ["Empanada Burguer","carne, cebolla y cheddar"],

  ["POLLO",""],
  ["Empanada Pollo cl√°sico","pollo, salsa y huevo"],
  ["Empanada Pollo queso","pollo, queso y aceituna"],
  ["Empanada Pollo reques√≥n","pollo y reques√≥n"],
  ["Empanada Pollo mostaza","pollo a la mostaza"],

  ["VERDURA",""],
  ["Empanada Palmito","jam√≥n y salsa golf"],
  ["Empanada Acelga","cebolla, morr√≥n y huevo"],
  ["Empanada Humita","choclo, queso y salsa blanca"],
  ["Empanada Choclo y jam√≥n",""],
  ["Empanada Caprese","queso, tomate y albahaca"],

  ["MAR",""],
  ["Empanada At√∫n","at√∫n, huevo y salsa"],

  ["MOZZARELLA",""],
  ["Empanada Pizza","mozzarella, salsa y or√©gano"],
  ["Empanada Alemana","mozzarella y frankfurter"],
  ["Empanada Napolitana","mozzarella, jam√≥n, morr√≥n y longaniza"],
  ["Empanada Caribe√±a","mozzarella, salame y aceituna"],
  ["Empanada Mozzarella y panceta",""],
  ["Empanada Mozzarella, cebolla y calabresa",""],

  ["QUESO",""],
  ["Empanada Jam√≥n y queso",""],
  ["Empanada Queso, calabresa y salsa",""],
  ["Empanada Queso y cebolla",""],
  ["Empanada Queso y aceituna",""],
  ["Empanada Libanesa","queso, cebolla, ajo y perejil"],
  ["Empanada Toscana","queso, panceta, cebolla y aceituna"],
  ["Empanada Tropical","queso, jam√≥n y anan√°"],
  ["Empanada 4 Quesos","catupiri, roquefort, mozzarella y parmesano"],

  ["DULCES",""],
  ["Empanada Dulce de leche",""],
  ["Empanada Membrillo",""],
  ["Empanada Crema pastelera",""],
  ["Empanada Mulata","dulce de leche y chocolate"],
  ["Empanada Gringa","dulce de leche y chocolate blanco"],
  ["Empanada Nutella",""]
 ]
},
{
 cat:"üçü OTROS PRODUCTOS",
 precio:0,
 items:[
  ["Papas fritas (porci√≥n)","120"],
  ["Aros de cebolla (10 u.)","120"],
  ["Nuggets (10 u.)","120"]
 ]
},
{
 cat:"ü•§ BEBIDAS",
 precio:0,
 items:[
  ["Coca-Cola",""],
  ["Mini","40"],
  ["Lata","60"],
  ["600 ml","80"],
  ["2 litros","120"],

  ["Fanta",""],
  ["Mini","40"],
  ["Lata","60"],
  ["600 ml","80"],
  ["2 litros","120"],

  ["Sprite",""],
  ["Mini","40"],
  ["Lata","60"],
  ["600 ml","80"],
  ["2 litros","120"]
 ]
},
{
 cat:"üçπ JUGOS NATURALES",
 precio:0,
 items:[
  ["Mango","120"],
  ["Frutilla","120"],
  ["Naranja","120"],
  ["Anan√°","120"]
 ]
},
{
 cat:"üç∫ CERVEZAS",
 precio:0,
 items:[
  ["Pilsen",""],
  ["Lata","120"],
  ["2 litros","180"],
  ["Patricia",""],
  ["Lata","120"],
  ["2 litros","220"],
  ["Glacial",""],
  ["Lata","110"]
 ]
}
];

function render(){
 let html="";
 productos.forEach(sec=>{
  html+=`<div class="card"><div class="section-title">${sec.cat}</div>`;
  let marca = "";
  sec.items.forEach((i,index)=>{
   if(i[1]==="" && i[0]===i[0].toUpperCase()){ html+=`<div class="sub-title">${i[0]}</div>`; return; }
   if(sec.cat.includes("BEBIDAS") || sec.cat.includes("JUGOS") || sec.cat.includes("CERVEZAS")){
     if(i[1]===""){ 
       marca = i[0];
       html+=`<div class="bebida-card"><div class="sub-title">${marca}</div>`; 
       return;
     } else {
       let nombreUnico = marca + " " + i[0]; // IDENTIFICADOR √öNICO
       let precio=parseInt(i[1]);
       carrito[nombreUnico]=0;
       html+=`
       <div class="bebida-option">
         <div>
           <div class="name">${i[0]}</div>
           <div class="desc">$${precio}</div>
         </div>
         <div class="controls">
           <button class="minus" onclick="chg('${nombreUnico}',-1,${precio})">‚àí</button>
           <span id="${nombreUnico}">0</span>
           <button class="plus" onclick="chg('${nombreUnico}',1,${precio})">+</button>
         </div>
       </div>`;
       let nextIndex = index+1;
       if(nextIndex>=sec.items.length || sec.items[nextIndex][1]==="") html+="</div>";
       return;
     }
   }
   let nombre=i[0], precio=sec.precio || parseInt(i[1]) || 0;
   carrito[nombre]=0;
   html+=`
   <div class="item">
    <div>
     <div class="name">${nombre}</div>
     ${sec.cat.includes("ü•ü EMPANADAS")?`<div class="desc">${i[1]}</div>`:`<div class="desc">$${precio}</div>`}
    </div>
    <div class="controls">
     <button class="minus" onclick="chg('${nombre}',-1,${precio})">‚àí</button>
     <span id="${nombre}">0</span>
     <button class="plus" onclick="chg('${nombre}',1,${precio})">+</button>
    </div>
   </div>`;
  });
  html+="</div>";
 });
 document.getElementById("menu").innerHTML=html;
}

function chg(n,d,p){
 carrito[n]+=d;
 if(carrito[n]<0) carrito[n]=0;
 document.getElementById(n).innerText=carrito[n];
 total+=d*p;
 if(total<0) total=0;
 document.getElementById("total").innerText=total;
 resumen();
}

function resumen(){
 let r="";
 for(let k in carrito){
  if(carrito[k]>0) r+=`${carrito[k]} x ${k}<br>`;
 }
 document.getElementById("resumen").innerHTML=r||"<small>No hay productos seleccionados</small>";
}

function setEntrega(t){
 entrega=t;
 const btnMostrador = document.getElementById("btnMostrador");
 const btnDelivery = document.getElementById("btnDelivery");
 btnMostrador.classList.remove("active");
 btnDelivery.classList.remove("active");
 if(t === "Mostrador") btnMostrador.classList.add("active");
 else btnDelivery.classList.add("active");
 document.getElementById("direccion").style.display = t==="Delivery"?"block":"none";
}

function setPago(p){
 pago=p;
 const btnEfectivo = document.getElementById("btnEfectivo");
 const btnTransferencia = document.getElementById("btnTransferencia");
 btnEfectivo.classList.remove("active");
 btnTransferencia.classList.remove("active");
 if(p === "Efectivo") btnEfectivo.classList.add("active");
 else btnTransferencia.classList.add("active");
}

function enviar(){
 const now = new Date();
 const hora = now.getHours();
 const minuto = now.getMinutes();
 const dia = now.getDay(); 
 if(dia===1){
   alert("üö´ Los lunes estamos cerrados, no se pueden realizar pedidos.");
   return;
 }
 if(hora<17 || hora>23){
   alert("üö´ Los pedidos se reciben de 17:00 a 23:00. El entregador inicia a las 18:30.");
   return;
 }

 let comprobante = "";
 if(pago==="Transferencia"){
   comprobante = prompt("‚ö†Ô∏è Has seleccionado Transferencia. Ingrese el link o confirmaci√≥n de su comprobante para aceptar el pedido. Ejemplo: https://ejemplo.com/comprobante");
   if(!comprobante){
     alert("No se puede enviar el pedido sin el comprobante de transferencia.");
     return;
   }
 }

 let msg="üßæ *Pedido - El Rey de las Empanadas*%0A%0A";
 for(let k in carrito){
  if(carrito[k]>0) msg+=`‚Ä¢ ${carrito[k]} x ${k}%0A`;
 }
 msg+=`%0Aüí∞ Total: $${total} (env√≠o no incluido)`;
 msg+=`%0Aüöö Entrega: ${entrega} (El entregador inicia a las 18:30)`;
 msg+=`%0Aüë§ Nombre: ${nombre.value||"No indicado"}`;
 if(entrega=="Delivery") msg+=`%0Aüìç Direcci√≥n: ${direccion.value||"No indicada"}`;
 msg+=`%0Aüí≥ Pago: ${pago}`;
 if(pago==="Transferencia") msg+=`%0Aüìé Comprobante: ${comprobante}`;
 window.open("https://wa.me/59892663559?text="+msg,"_blank");
}

render();
</script>

</body>
</html>
