<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>El Rey de las Empanadas</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial,sans-serif;background:#f4f4f4;margin:0;padding:10px}
h1{text-align:center;color:#b30000;margin-bottom:5px}
h1 small{display:block;font-size:12px;color:#555}
.section-title{background:#b30000;color:white;padding:8px 12px;border-radius:8px;margin-bottom:10px;font-size:18px}
.sub-title{font-weight:bold;color:#b30000;margin:12px 0 6px;font-size:15px;border-bottom:1px solid #eee}
.card{background:white;padding:15px;border-radius:12px;margin-bottom:20px;box-shadow:0 2px 6px rgba(0,0,0,.1)}
.item{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px dashed #eee;gap:10px}
.item:last-child{border-bottom:none}
.name{font-weight:bold;font-size:15px}
.desc{font-size:12px;color:#777;margin-top:2px}
.controls{display:flex;align-items:center;gap:6px;min-width:90px;justify-content:flex-end}
.controls button{width:30px;height:30px;border:none;border-radius:6px;font-size:18px;cursor:pointer}
.controls .plus{background:#25D366;color:white}
.controls .minus{background:#b30000;color:white}
.selector{display:flex;gap:10px;margin:10px 0}
.selector button{flex:1;padding:10px;font-size:16px;border-radius:8px;border:1px solid #ccc;background:#eee}
.selector button.active{background:#b30000;color:white}
.input-area input,.input-area textarea{width:100%;padding:10px;margin:6px 0;font-size:16px;border-radius:6px;border:1px solid #ccc}
.total{background:white;padding:15px;border-radius:12px;box-shadow:0 3px 8px rgba(0,0,0,.15)}
button.send{width:100%;padding:15px;background:#25D366;color:white;font-size:20px;border:none;border-radius:12px;margin-top:10px}
.notice{background:#fff3cd;color:#b30000;padding:10px;border-radius:8px;margin:10px 0;font-size:14px;text-align:center}
.cambio-box{background:#fff3cd;border:1px solid #e0a800;border-radius:8px;padding:8px;margin-top:10px}
.cambio-box input{width:100%;border:none;background:transparent;font-size:14px}
.qr-box{margin-top:30px;background:#fff;border:3px solid #b30000;border-radius:14px;padding:20px;text-align:center}
.qr-box img{width:220px;margin:10px auto;display:block}
.qr-box a{color:#25D366;font-weight:bold;text-decoration:none}
</style>
</head>

<body>

<h1>üëë El Rey de las Empanadas
<small>Lunes cerrado ¬∑ Pedidos de 17 a 23 hs</small>
</h1>

<div id="menu"></div>

<div class="total">
<div class="section-title">üõí Resumen del pedido</div>
<div id="resumen"><small>No hay productos seleccionados</small></div>
<p><b>Total:</b> $<span id="total">0</span></p>

<div id="avisoEnvio" class="notice" style="display:none">
‚è≥ Esperar confirmaci√≥n del costo total con env√≠o
</div>

<div class="section-title">üöö Forma de entrega</div>
<div class="selector">
<button id="btnMostrador" class="active" onclick="setEntrega('Mostrador')">Retiro en mostrador</button>
<button id="btnDelivery" onclick="setEntrega('Delivery')">Delivery</button>
</div>

<div class="input-area">
<input id="nombre" placeholder="Nombre">
<input id="direccion" placeholder="Direcci√≥n" style="display:none">
<textarea id="observaciones" placeholder="Observaciones para delivery" style="display:none"></textarea>
</div>

<div class="section-title">üí≥ Forma de pago</div>
<div class="selector">
<button id="btnEfectivo" class="active" onclick="setPago('Efectivo')">Efectivo</button>
<button id="btnTransferencia" onclick="setPago('Transferencia')">Transferencia</button>
</div>

<div id="transferNotice" class="notice" style="display:none">
üìé El enlace para la transferencia ser√° enviado por WhatsApp. Enviar comprobante.
</div>

<div id="cambioBox" class="cambio-box">
<input id="efectivoCambio" placeholder="¬øNecesit√°s cambio? Indic√° con cu√°nto pag√°s">
</div>

<button class="send" onclick="enviar()">üì≤ Enviar pedido</button>
</div>

<div class="qr-box">
<p><b>üì≤ Escane√° para hacer tu pedido</b></p>
<img src="https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=https://reydelasempanadas.github.io/el-rey-de-las-empanadas/">
<a href="https://reydelasempanadas.github.io/el-rey-de-las-empanadas/" target="_blank">
üëâ Click en el enlace para hacer tu pedido
</a>
</div>

<script>
let entrega="Mostrador",pago="Efectivo";
let carrito={},precios={},total=0;

function idify(t){return t.replace(/\s+/g,'_').replace(/[^\w]/g,'')}

const productos=[
{
cat:"ü•ü Empanadas - $60 c/u",
precio:60,
items:[
["CARNE",""],
["Empanada Criolla","carne y huevo"],
["Empanada Mendocina","carne, huevo y aceituna"],
["Empanada Mexicana","carne, huevo, aceituna y pimienta"],
["Empanada Cordobesa","carne, huevo y pasas"],
["Empanada Mixta","carne, huevo, choclo y calabresa"],
["Empanada Gallega","carne, huevo y panceta"],
["Empanada Burguer","carne, cebolla y cheddar"],

["POLLO",""],
["Empanada Pollo cl√°sico","pollo, salsa y huevo"],
["Empanada Pollo queso","pollo, queso y aceituna"],
["Empanada Pollo reques√≥n","pollo y reques√≥n"],
["Empanada Pollo mostaza","pollo a la mostaza"],

["VERDURA",""],
["Empanada Palmito","jam√≥n y salsa golf"],
["Empanada Acelga","cebolla, morr√≥n y huevo"],
["Empanada Humita","choclo, queso y salsa blanca"],
["Empanada Choclo y jam√≥n",""],
["Empanada Caprese","queso, tomate y albahaca"],

["MOZZARELLA",""],
["Empanada Pizza","mozzarella, salsa y or√©gano"],
["Empanada Alemana","mozzarella y frankfurter"],
["Empanada Napolitana","mozzarella, jam√≥n, morr√≥n y longaniza"],
["Empanada Caribe√±a","mozzarella, salame y aceituna"],
["Empanada Mozzarella y panceta",""],
["Empanada Mozzarella, cebolla y calabresa",""],

["QUESO",""],
["Empanada Jam√≥n y queso",""],
["Empanada Queso, calabresa y salsa",""],
["Empanada Queso y cebolla",""],
["Empanada Queso y aceituna",""],
["Empanada 4 Quesos","catupiri, roquefort, mozzarella y parmesano"],

["DULCES",""],
["Empanada Dulce de leche",""],
["Empanada Membrillo",""],
["Empanada Crema pastelera",""],
["Empanada Nutella",""]
]
}
];

function render(){
let h="";
productos.forEach(sec=>{
h+=`<div class="card"><div class="section-title">${sec.cat}</div>`;
sec.items.forEach(i=>{
if(i[1]==="" && i[0]===i[0].toUpperCase()){
h+=`<div class="sub-title">${i[0]}</div>`;
return;
}
let id=idify(i[0]);
carrito[id]=0;
precios[id]=sec.precio;
h+=`<div class="item">
<div>
<div class="name">${i[0]}</div>
<div class="desc">${i[1]}</div>
</div>
<div class="controls">
<button class="minus" onclick="chg('${id}',-1)">‚àí</button>
<span id="${id}">0</span>
<button class="plus" onclick="chg('${id}',1)">+</button>
</div>
</div>`;
});
h+="</div>";
});
menu.innerHTML=h;
}

function chg(id,d){
carrito[id]=Math.max(0,carrito[id]+d);
document.getElementById(id).innerText=carrito[id];
calcular();
}

function calcular(){
total=0;
for(let k in carrito) total+=carrito[k]*precios[k];
document.getElementById("total").innerText=total;
resumen();
}

function resumen(){
let r="";
for(let k in carrito) if(carrito[k])
r+=`${carrito[k]} ${k.replace(/_/g," ")}<br>`;
document.getElementById("resumen").innerHTML=r||"<small>No hay productos seleccionados</small>";
}

function setEntrega(t){
entrega=t;
btnMostrador.classList.toggle("active",t==="Mostrador");
btnDelivery.classList.toggle("active",t==="Delivery");
direccion.style.display=observaciones.style.display=t==="Delivery"?"block":"none";
avisoEnvio.style.display=t==="Delivery"?"block":"none";
}

function setPago(p){
pago=p;
btnEfectivo.classList.toggle("active",p==="Efectivo");
btnTransferencia.classList.toggle("active",p==="Transferencia");
cambioBox.style.display=p==="Efectivo"?"block":"none";
transferNotice.style.display=p==="Transferencia"?"block":"none";
}

function enviar(){
if(!total || !nombre.value){
alert("Complete el pedido");
return;
}
let m="üßæ *Pedido*%0A";
for(let k in carrito) if(carrito[k])
m+=`‚Ä¢ ${carrito[k]} ${k.replace(/_/g," ")}%0A`;
m+=`%0Aüí∞ Total: $${total}`+(entrega==="Delivery"?" + env√≠o":"");
window.open("https://wa.me/59892663559?text="+m,"_blank");
}

render();
</script>

</body>
</html>
